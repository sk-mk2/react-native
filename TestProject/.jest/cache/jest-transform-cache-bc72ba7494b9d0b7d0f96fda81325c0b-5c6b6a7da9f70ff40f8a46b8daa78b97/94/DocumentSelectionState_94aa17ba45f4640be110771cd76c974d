78ca52dc33add4127fe6bcea415d5e27
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var mixInEventEmitter=require('mixInEventEmitter');var DocumentSelectionState=function(){function DocumentSelectionState(anchor,focus){_classCallCheck(this,DocumentSelectionState);this._anchorOffset=anchor;this._focusOffset=focus;this._hasFocus=false;}_createClass(DocumentSelectionState,[{key:'update',value:function update(anchor,focus){if(this._anchorOffset!==anchor||this._focusOffset!==focus){this._anchorOffset=anchor;this._focusOffset=focus;this.emit('update');}}},{key:'constrainLength',value:function constrainLength(maxLength){this.update(Math.min(this._anchorOffset,maxLength),Math.min(this._focusOffset,maxLength));}},{key:'focus',value:function focus(){if(!this._hasFocus){this._hasFocus=true;this.emit('focus');}}},{key:'blur',value:function blur(){if(this._hasFocus){this._hasFocus=false;this.emit('blur');}}},{key:'hasFocus',value:function hasFocus(){return this._hasFocus;}},{key:'isCollapsed',value:function isCollapsed(){return this._anchorOffset===this._focusOffset;}},{key:'isBackward',value:function isBackward(){return this._anchorOffset>this._focusOffset;}},{key:'getAnchorOffset',value:function getAnchorOffset(){return this._hasFocus?this._anchorOffset:null;}},{key:'getFocusOffset',value:function getFocusOffset(){return this._hasFocus?this._focusOffset:null;}},{key:'getStartOffset',value:function getStartOffset(){return this._hasFocus?Math.min(this._anchorOffset,this._focusOffset):null;}},{key:'getEndOffset',value:function getEndOffset(){return this._hasFocus?Math.max(this._anchorOffset,this._focusOffset):null;}},{key:'overlaps',value:function overlaps(start,end){return this.hasFocus()&&this.getStartOffset()<=end&&start<=this.getEndOffset();}}]);return DocumentSelectionState;}();mixInEventEmitter(DocumentSelectionState,{'blur':true,'focus':true,'update':true});module.exports=DocumentSelectionState;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRvY3VtZW50U2VsZWN0aW9uU3RhdGUuanMiXSwibmFtZXMiOlsibWl4SW5FdmVudEVtaXR0ZXIiLCJyZXF1aXJlIiwiRG9jdW1lbnRTZWxlY3Rpb25TdGF0ZSIsImFuY2hvciIsImZvY3VzIiwiX2FuY2hvck9mZnNldCIsIl9mb2N1c09mZnNldCIsIl9oYXNGb2N1cyIsImVtaXQiLCJtYXhMZW5ndGgiLCJ1cGRhdGUiLCJNYXRoIiwibWluIiwibWF4Iiwic3RhcnQiLCJlbmQiLCJoYXNGb2N1cyIsImdldFN0YXJ0T2Zmc2V0IiwiZ2V0RW5kT2Zmc2V0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBVUEsYSwrb0JBRUEsR0FBSUEsbUJBQW9CQyxPQUFwQixxQkFBSixDLEdBV01DLHVCLFlBS0osZ0NBQVlDLE1BQVosQ0FBb0JDLEtBQXBCLENBQTJCLDhDQUN6QixLQUFLQyxhQUFMLENBQXFCRixNQUFyQixDQUNBLEtBQUtHLFlBQUwsQ0FBb0JGLEtBQXBCLENBQ0EsS0FBS0csU0FBTCxDQUFpQixLQUFqQixDQUNELEMseUVBU01KLE0sQ0FBUUMsSyxDQUFPLENBQ3BCLEdBQUksS0FBS0MsYUFBTCxHQUF1QkYsTUFBdkIsRUFBaUMsS0FBS0csWUFBTCxHQUFzQkYsS0FBM0QsQ0FBa0UsQ0FDaEUsS0FBS0MsYUFBTCxDQUFxQkYsTUFBckIsQ0FDQSxLQUFLRyxZQUFMLENBQW9CRixLQUFwQixDQUNBLEtBQUtJLElBQUwsQ0FBVSxRQUFWLEVBQ0QsQ0FDRixDLHdEQVFlQyxTLENBQVcsQ0FDekIsS0FBS0MsTUFBTCxDQUNFQyxLQUFLQyxHQUFMLENBQVMsS0FBS1AsYUFBZCxDQUE2QkksU0FBN0IsQ0FERixDQUVFRSxLQUFLQyxHQUFMLENBQVMsS0FBS04sWUFBZCxDQUE0QkcsU0FBNUIsQ0FGRixFQUlELEMscUNBRU8sQ0FDTixHQUFJLENBQUMsS0FBS0YsU0FBVixDQUFxQixDQUNuQixLQUFLQSxTQUFMLENBQWlCLElBQWpCLENBQ0EsS0FBS0MsSUFBTCxDQUFVLE9BQVYsRUFDRCxDQUNGLEMsbUNBRU0sQ0FDTCxHQUFJLEtBQUtELFNBQVQsQ0FBb0IsQ0FDbEIsS0FBS0EsU0FBTCxDQUFpQixLQUFqQixDQUNBLEtBQUtDLElBQUwsQ0FBVSxNQUFWLEVBQ0QsQ0FDRixDLDJDQUtVLENBQ1QsTUFBTyxNQUFLRCxTQUFaLENBQ0QsQyxpREFLYSxDQUNaLE1BQU8sTUFBS0YsYUFBTCxHQUF1QixLQUFLQyxZQUFuQyxDQUNELEMsK0NBS1ksQ0FDWCxNQUFPLE1BQUtELGFBQUwsQ0FBcUIsS0FBS0MsWUFBakMsQ0FDRCxDLHlEQUtpQixDQUNoQixNQUFPLE1BQUtDLFNBQUwsQ0FBaUIsS0FBS0YsYUFBdEIsQ0FBc0MsSUFBN0MsQ0FDRCxDLHVEQUtnQixDQUNmLE1BQU8sTUFBS0UsU0FBTCxDQUFpQixLQUFLRCxZQUF0QixDQUFxQyxJQUE1QyxDQUNELEMsdURBS2dCLENBQ2YsTUFDRSxNQUFLQyxTQUFMLENBQWlCSSxLQUFLQyxHQUFMLENBQVMsS0FBS1AsYUFBZCxDQUE2QixLQUFLQyxZQUFsQyxDQUFqQixDQUFtRSxJQURyRSxDQUdELEMsbURBS2MsQ0FDYixNQUNFLE1BQUtDLFNBQUwsQ0FBaUJJLEtBQUtFLEdBQUwsQ0FBUyxLQUFLUixhQUFkLENBQTZCLEtBQUtDLFlBQWxDLENBQWpCLENBQW1FLElBRHJFLENBR0QsQywwQ0FPUVEsSyxDQUFPQyxHLENBQUssQ0FDbkIsTUFDRSxNQUFLQyxRQUFMLElBQ0EsS0FBS0MsY0FBTCxJQUF5QkYsR0FEekIsRUFDZ0NELE9BQVMsS0FBS0ksWUFBTCxFQUYzQyxDQUlELEMsc0NBR0hsQixrQkFBa0JFLHNCQUFsQixDQUEwQyxDQUN4QyxPQUFRLElBRGdDLENBRXhDLFFBQVMsSUFGK0IsQ0FHeEMsU0FBVSxJQUg4QixDQUExQyxFQU1BaUIsT0FBT0MsT0FBUCxDQUFpQmxCLHNCQUFqQiIsImZpbGUiOiJEb2N1bWVudFNlbGVjdGlvblN0YXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRG9jdW1lbnRTZWxlY3Rpb25TdGF0ZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBtaXhJbkV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ21peEluRXZlbnRFbWl0dGVyJyk7XG5cbi8qKlxuICogRG9jdW1lbnRTZWxlY3Rpb25TdGF0ZSBpcyByZXNwb25zaWJsZSBmb3IgbWFpbnRhaW5pbmcgc2VsZWN0aW9uIGluZm9ybWF0aW9uXG4gKiBmb3IgYSBkb2N1bWVudC5cbiAqXG4gKiBJdCBpcyBpbnRlbmRlZCBmb3IgdXNlIGJ5IEFic3RyYWN0VGV4dEVkaXRvci1iYXNlZCBjb21wb25lbnRzIGZvclxuICogaWRlbnRpZnlpbmcgdGhlIGFwcHJvcHJpYXRlIHN0YXJ0L2VuZCBwb3NpdGlvbnMgdG8gbW9kaWZ5IHRoZVxuICogRG9jdW1lbnRDb250ZW50LCBhbmQgZm9yIHByb2dyYW1tYXRpY2FsbHkgc2V0dGluZyBicm93c2VyIHNlbGVjdGlvbiB3aGVuXG4gKiBjb21wb25lbnRzIHJlLXJlbmRlci5cbiAqL1xuY2xhc3MgRG9jdW1lbnRTZWxlY3Rpb25TdGF0ZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5jaG9yXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBmb2N1c1xuICAgKi9cbiAgY29uc3RydWN0b3IoYW5jaG9yLCBmb2N1cykge1xuICAgIHRoaXMuX2FuY2hvck9mZnNldCA9IGFuY2hvcjtcbiAgICB0aGlzLl9mb2N1c09mZnNldCA9IGZvY3VzO1xuICAgIHRoaXMuX2hhc0ZvY3VzID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYW4gdXBkYXRlIHRvIHRoZSBzdGF0ZS4gSWYgZWl0aGVyIG9mZnNldCB2YWx1ZSBoYXMgY2hhbmdlZCxcbiAgICogc2V0IHRoZSB2YWx1ZXMgYW5kIGVtaXQgdGhlIGBjaGFuZ2VgIGV2ZW50LiBPdGhlcndpc2Ugbm8tb3AuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbmNob3JcbiAgICogQHBhcmFtIHtudW1iZXJ9IGZvY3VzXG4gICAqL1xuICB1cGRhdGUoYW5jaG9yLCBmb2N1cykge1xuICAgIGlmICh0aGlzLl9hbmNob3JPZmZzZXQgIT09IGFuY2hvciB8fCB0aGlzLl9mb2N1c09mZnNldCAhPT0gZm9jdXMpIHtcbiAgICAgIHRoaXMuX2FuY2hvck9mZnNldCA9IGFuY2hvcjtcbiAgICAgIHRoaXMuX2ZvY3VzT2Zmc2V0ID0gZm9jdXM7XG4gICAgICB0aGlzLmVtaXQoJ3VwZGF0ZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIG1heCB0ZXh0IGxlbmd0aCwgY29uc3RyYWluIG91ciBzZWxlY3Rpb24gb2Zmc2V0cyB0byBlbnN1cmVcbiAgICogdGhhdCB0aGUgc2VsZWN0aW9uIHJlbWFpbnMgc3RyaWN0bHkgd2l0aGluIHRoZSB0ZXh0IHJhbmdlLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4TGVuZ3RoXG4gICAqL1xuICBjb25zdHJhaW5MZW5ndGgobWF4TGVuZ3RoKSB7XG4gICAgdGhpcy51cGRhdGUoXG4gICAgICBNYXRoLm1pbih0aGlzLl9hbmNob3JPZmZzZXQsIG1heExlbmd0aCksXG4gICAgICBNYXRoLm1pbih0aGlzLl9mb2N1c09mZnNldCwgbWF4TGVuZ3RoKVxuICAgICk7XG4gIH1cblxuICBmb2N1cygpIHtcbiAgICBpZiAoIXRoaXMuX2hhc0ZvY3VzKSB7XG4gICAgICB0aGlzLl9oYXNGb2N1cyA9IHRydWU7XG4gICAgICB0aGlzLmVtaXQoJ2ZvY3VzJyk7XG4gICAgfVxuICB9XG5cbiAgYmx1cigpIHtcbiAgICBpZiAodGhpcy5faGFzRm9jdXMpIHtcbiAgICAgIHRoaXMuX2hhc0ZvY3VzID0gZmFsc2U7XG4gICAgICB0aGlzLmVtaXQoJ2JsdXInKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc0ZvY3VzKCkge1xuICAgIHJldHVybiB0aGlzLl9oYXNGb2N1cztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNDb2xsYXBzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FuY2hvck9mZnNldCA9PT0gdGhpcy5fZm9jdXNPZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQmFja3dhcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FuY2hvck9mZnNldCA+IHRoaXMuX2ZvY3VzT2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9udW1iZXJ9XG4gICAqL1xuICBnZXRBbmNob3JPZmZzZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hhc0ZvY3VzID8gdGhpcy5fYW5jaG9yT2Zmc2V0IDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHs/bnVtYmVyfVxuICAgKi9cbiAgZ2V0Rm9jdXNPZmZzZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hhc0ZvY3VzID8gdGhpcy5fZm9jdXNPZmZzZXQgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9udW1iZXJ9XG4gICAqL1xuICBnZXRTdGFydE9mZnNldCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5faGFzRm9jdXMgPyBNYXRoLm1pbih0aGlzLl9hbmNob3JPZmZzZXQsIHRoaXMuX2ZvY3VzT2Zmc2V0KSA6IG51bGxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gez9udW1iZXJ9XG4gICAqL1xuICBnZXRFbmRPZmZzZXQoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX2hhc0ZvY3VzID8gTWF0aC5tYXgodGhpcy5fYW5jaG9yT2Zmc2V0LCB0aGlzLl9mb2N1c09mZnNldCkgOiBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVuZFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgb3ZlcmxhcHMoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmhhc0ZvY3VzKCkgJiZcbiAgICAgIHRoaXMuZ2V0U3RhcnRPZmZzZXQoKSA8PSBlbmQgJiYgc3RhcnQgPD0gdGhpcy5nZXRFbmRPZmZzZXQoKVxuICAgICk7XG4gIH1cbn1cblxubWl4SW5FdmVudEVtaXR0ZXIoRG9jdW1lbnRTZWxlY3Rpb25TdGF0ZSwge1xuICAnYmx1cic6IHRydWUsXG4gICdmb2N1cyc6IHRydWUsXG4gICd1cGRhdGUnOiB0cnVlXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBEb2N1bWVudFNlbGVjdGlvblN0YXRlO1xuIl19