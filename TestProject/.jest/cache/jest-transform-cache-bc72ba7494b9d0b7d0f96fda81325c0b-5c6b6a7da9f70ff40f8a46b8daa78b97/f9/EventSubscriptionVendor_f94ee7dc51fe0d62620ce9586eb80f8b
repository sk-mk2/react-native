35ecee190ea26fca8af3d7b033873458
'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var invariant=require('fbjs/lib/invariant');var EventSubscriptionVendor=function(){function EventSubscriptionVendor(){_classCallCheck(this,EventSubscriptionVendor);this._subscriptionsForType={};this._currentSubscription=null;}_createClass(EventSubscriptionVendor,[{key:'addSubscription',value:function addSubscription(eventType,subscription){invariant(subscription.subscriber===this,'The subscriber of the subscription is incorrectly set.');if(!this._subscriptionsForType[eventType]){this._subscriptionsForType[eventType]=[];}var key=this._subscriptionsForType[eventType].length;this._subscriptionsForType[eventType].push(subscription);subscription.eventType=eventType;subscription.key=key;return subscription;}},{key:'removeAllSubscriptions',value:function removeAllSubscriptions(eventType){if(eventType===undefined){this._subscriptionsForType={};}else{delete this._subscriptionsForType[eventType];}}},{key:'removeSubscription',value:function removeSubscription(subscription){var eventType=subscription.eventType;var key=subscription.key;var subscriptionsForType=this._subscriptionsForType[eventType];if(subscriptionsForType){delete subscriptionsForType[key];}}},{key:'getSubscriptionsForType',value:function getSubscriptionsForType(eventType){return this._subscriptionsForType[eventType];}}]);return EventSubscriptionVendor;}();module.exports=EventSubscriptionVendor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yLmpzIl0sIm5hbWVzIjpbImludmFyaWFudCIsInJlcXVpcmUiLCJFdmVudFN1YnNjcmlwdGlvblZlbmRvciIsIl9zdWJzY3JpcHRpb25zRm9yVHlwZSIsIl9jdXJyZW50U3Vic2NyaXB0aW9uIiwiZXZlbnRUeXBlIiwic3Vic2NyaXB0aW9uIiwic3Vic2NyaWJlciIsImtleSIsImxlbmd0aCIsInB1c2giLCJ1bmRlZmluZWQiLCJzdWJzY3JpcHRpb25zRm9yVHlwZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVNBLGEsK29CQUVBLEdBQU1BLFdBQVlDLE9BQVosc0JBQU4sQyxHQVFNQyx3QixZQUtKLGtDQUFjLCtDQUNaLEtBQUtDLHFCQUFMLENBQTZCLEVBQTdCLENBQ0EsS0FBS0Msb0JBQUwsQ0FBNEIsSUFBNUIsQ0FDRCxDLDRGQVNDQyxTLENBQW1CQyxZLENBQW9ELENBQ3ZFTixVQUNFTSxhQUFhQyxVQUFiLEdBQTRCLElBRDlCLENBRUUsd0RBRkYsRUFHQSxHQUFJLENBQUMsS0FBS0oscUJBQUwsQ0FBMkJFLFNBQTNCLENBQUwsQ0FBNEMsQ0FDMUMsS0FBS0YscUJBQUwsQ0FBMkJFLFNBQTNCLEVBQXdDLEVBQXhDLENBQ0QsQ0FDRCxHQUFNRyxLQUFNLEtBQUtMLHFCQUFMLENBQTJCRSxTQUEzQixFQUFzQ0ksTUFBbEQsQ0FDQSxLQUFLTixxQkFBTCxDQUEyQkUsU0FBM0IsRUFBc0NLLElBQXRDLENBQTJDSixZQUEzQyxFQUNBQSxhQUFhRCxTQUFiLENBQXlCQSxTQUF6QixDQUNBQyxhQUFhRSxHQUFiLENBQW1CQSxHQUFuQixDQUNBLE1BQU9GLGFBQVAsQ0FDRCxDLHNFQVFzQkQsUyxDQUFvQixDQUN6QyxHQUFJQSxZQUFjTSxTQUFsQixDQUE2QixDQUMzQixLQUFLUixxQkFBTCxDQUE2QixFQUE3QixDQUNELENBRkQsSUFFTyxDQUNMLE1BQU8sTUFBS0EscUJBQUwsQ0FBMkJFLFNBQTNCLENBQVAsQ0FDRCxDQUNGLEMsOERBUWtCQyxZLENBQXNCLENBQ3ZDLEdBQU1ELFdBQVlDLGFBQWFELFNBQS9CLENBQ0EsR0FBTUcsS0FBTUYsYUFBYUUsR0FBekIsQ0FFQSxHQUFNSSxzQkFBdUIsS0FBS1QscUJBQUwsQ0FBMkJFLFNBQTNCLENBQTdCLENBQ0EsR0FBSU8sb0JBQUosQ0FBMEIsQ0FDeEIsTUFBT0Esc0JBQXFCSixHQUFyQixDQUFQLENBQ0QsQ0FDRixDLHdFQWN1QkgsUyxDQUF5QyxDQUNoRSxNQUFPLE1BQUtGLHFCQUFMLENBQTJCRSxTQUEzQixDQUFQLENBQ0EsQyx1Q0FHSFEsT0FBT0MsT0FBUCxDQUFpQlosdUJBQWpCIiwiZmlsZSI6IkV2ZW50U3Vic2NyaXB0aW9uVmVuZG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRTdWJzY3JpcHRpb25WZW5kb3JcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbmltcG9ydCB0eXBlIEV2ZW50U3Vic2NyaXB0aW9uIGZyb20gJ0V2ZW50U3Vic2NyaXB0aW9uJztcblxuLyoqXG4gKiBFdmVudFN1YnNjcmlwdGlvblZlbmRvciBzdG9yZXMgYSBzZXQgb2YgRXZlbnRTdWJzY3JpcHRpb25zIHRoYXQgYXJlXG4gKiBzdWJzY3JpYmVkIHRvIGEgcGFydGljdWxhciBldmVudCB0eXBlLlxuICovXG5jbGFzcyBFdmVudFN1YnNjcmlwdGlvblZlbmRvciB7XG5cbiAgX3N1YnNjcmlwdGlvbnNGb3JUeXBlOiBPYmplY3Q7XG4gIF9jdXJyZW50U3Vic2NyaXB0aW9uOiA/RXZlbnRTdWJzY3JpcHRpb247XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGUgPSB7fTtcbiAgICB0aGlzLl9jdXJyZW50U3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgc3Vic2NyaXB0aW9uIGtleWVkIGJ5IGFuIGV2ZW50IHR5cGUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICogQHBhcmFtIHtFdmVudFN1YnNjcmlwdGlvbn0gc3Vic2NyaXB0aW9uXG4gICAqL1xuICBhZGRTdWJzY3JpcHRpb24oXG4gICAgZXZlbnRUeXBlOiBzdHJpbmcsIHN1YnNjcmlwdGlvbjogRXZlbnRTdWJzY3JpcHRpb24pOiBFdmVudFN1YnNjcmlwdGlvbiB7XG4gICAgaW52YXJpYW50KFxuICAgICAgc3Vic2NyaXB0aW9uLnN1YnNjcmliZXIgPT09IHRoaXMsXG4gICAgICAnVGhlIHN1YnNjcmliZXIgb2YgdGhlIHN1YnNjcmlwdGlvbiBpcyBpbmNvcnJlY3RseSBzZXQuJyk7XG4gICAgaWYgKCF0aGlzLl9zdWJzY3JpcHRpb25zRm9yVHlwZVtldmVudFR5cGVdKSB7XG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb25zRm9yVHlwZVtldmVudFR5cGVdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0ubGVuZ3RoO1xuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV0ucHVzaChzdWJzY3JpcHRpb24pO1xuICAgIHN1YnNjcmlwdGlvbi5ldmVudFR5cGUgPSBldmVudFR5cGU7XG4gICAgc3Vic2NyaXB0aW9uLmtleSA9IGtleTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBidWxrIHNldCBvZiB0aGUgc3Vic2NyaXB0aW9ucy5cbiAgICpcbiAgICogQHBhcmFtIHs/c3RyaW5nfSBldmVudFR5cGUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBldmVudCB0eXBlIHdob3NlXG4gICAqICAgcmVnaXN0ZXJlZCBzdXBzY3JpcHRpb25zIHRvIHJlbW92ZSwgaWYgbnVsbCByZW1vdmUgYWxsIHN1YnNjcmlwdGlvbnMuXG4gICAqL1xuICByZW1vdmVBbGxTdWJzY3JpcHRpb25zKGV2ZW50VHlwZTogP3N0cmluZykge1xuICAgIGlmIChldmVudFR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fc3Vic2NyaXB0aW9uc0ZvclR5cGUgPSB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBzcGVjaWZpYyBzdWJzY3JpcHRpb24uIEluc3RlYWQgb2YgY2FsbGluZyB0aGlzIGZ1bmN0aW9uLCBjYWxsXG4gICAqIGBzdWJzY3JpcHRpb24ucmVtb3ZlKClgIGRpcmVjdGx5LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gc3Vic2NyaXB0aW9uXG4gICAqL1xuICByZW1vdmVTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uOiBPYmplY3QpIHtcbiAgICBjb25zdCBldmVudFR5cGUgPSBzdWJzY3JpcHRpb24uZXZlbnRUeXBlO1xuICAgIGNvbnN0IGtleSA9IHN1YnNjcmlwdGlvbi5rZXk7XG5cbiAgICBjb25zdCBzdWJzY3JpcHRpb25zRm9yVHlwZSA9IHRoaXMuX3N1YnNjcmlwdGlvbnNGb3JUeXBlW2V2ZW50VHlwZV07XG4gICAgaWYgKHN1YnNjcmlwdGlvbnNGb3JUeXBlKSB7XG4gICAgICBkZWxldGUgc3Vic2NyaXB0aW9uc0ZvclR5cGVba2V5XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYXJyYXkgb2Ygc3Vic2NyaXB0aW9ucyB0aGF0IGFyZSBjdXJyZW50bHkgcmVnaXN0ZXJlZCBmb3IgdGhlXG4gICAqIGdpdmVuIGV2ZW50IHR5cGUuXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgYXJyYXkgY2FuIGJlIHBvdGVudGlhbGx5IHNwYXJzZSBhcyBzdWJzY3JpcHRpb25zIGFyZSBkZWxldGVkXG4gICAqIGZyb20gaXQgd2hlbiB0aGV5IGFyZSByZW1vdmVkLlxuICAgKlxuICAgKiBUT0RPOiBUaGlzIHJldHVybnMgYSBudWxsYWJsZSBhcnJheS4gd2F0P1xuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gICAqIEByZXR1cm5zIHs/YXJyYXl9XG4gICAqL1xuICBnZXRTdWJzY3JpcHRpb25zRm9yVHlwZShldmVudFR5cGU6IHN0cmluZyk6ID9bRXZlbnRTdWJzY3JpcHRpb25dIHtcbiAgIHJldHVybiB0aGlzLl9zdWJzY3JpcHRpb25zRm9yVHlwZVtldmVudFR5cGVdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRTdWJzY3JpcHRpb25WZW5kb3I7XG4iXX0=